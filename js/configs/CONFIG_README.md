# Конфигурация приложения Randomatched

## Обзор

Настройки приложения теперь вынесены в отдельный файл `js/configs/app-config.js` для удобства управления версиями и конфигурацией.

## Структура конфигурации

### Основные настройки

- **CACHE_VERSION** - версия кэша для PWA (изменение этой версии автоматически обновит приложение)
- **APP_CONFIG** - объект с полной конфигурацией приложения

### Настройки кэширования

```javascript
cache: {
  name: 'randomatched-cache-' + CACHE_VERSION,  // Имя кэша
  strategy: 'cache-first',                      // Стратегия кэширования
  ttl: 7 * 24 * 60 * 60 * 1000                 // Время жизни кэша (7 дней)
}
```

### Настройки уведомлений

```javascript
notifications: {
  enabled: true,                                // Включены ли уведомления
  title: 'Randomatched',                        // Заголовок уведомлений
  icon: '/icons/icon-192.png',                 // Иконка уведомлений
  badge: '/icons/icon-192.png'                 // Значок уведомлений
}
```

### Настройки обновления

```javascript
update: {
  autoCheck: true,                              // Автоматическая проверка обновлений
  checkInterval: 60 * 60 * 1000,               // Интервал проверки (1 час)
  forceUpdate: true                             // Принудительное обновление
}
```

## Как обновить версию приложения

1. Откройте файл `js/configs/app-config.js`
2. Измените значение `CACHE_VERSION` (например, с `'v1.0.24'` на `'v1.0.25'`)
3. Сохраните файл
4. Service Worker автоматически обнаружит изменение и обновит кэш

## Автоматические функции обновления

При изменении `CACHE_VERSION` Service Worker автоматически:

1. **Установит новый кэш** с обновленной версией
2. **Удалит старые кэши** предыдущих версий
3. **Принудительно активирует** новый Service Worker
4. **Уведомит клиентов** о начале обновления (`UPDATE_STARTING`)
5. **Уведомит клиентов** о готовности обновления (`UPDATE_READY`)

## Совместимость

- Файл конфигурации совместим с `importScripts()` для Service Worker
- Использует `var` вместо `const/let` для совместимости со старыми браузерами
- Сохраняет все существующие функции автоматического обновления

## Использование в коде

```javascript
// В Service Worker
importScripts('/js/configs/app-config.js');
const cacheName = APP_CONFIG.cache.name;
const version = CACHE_VERSION;

// В основном приложении (если нужно)
// Можно импортировать как ES6 модуль
import { CACHE_VERSION, APP_CONFIG } from './js/configs/app-config.js';
```
